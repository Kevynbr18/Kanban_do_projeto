<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Criar Reserva</title>
  <link rel="stylesheet" href="FazerReserva.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css">
</head>
<body>
   <header>
    <div class="logo">
      <img src="../imagem/logo_sem_fundo(1).png" alt="Logo SAE">
      <h1>SAE - Sistema de Agendamento Escolar</h1>
    </div>
    <nav>
      <a href="LoginAluno.html"><button>Inicio</button></a>
      <a href="MinhasReservas.html"><button>Reservas</button></a>
      <button>Administração</button>
      <a href="../Professor/LoginProfessor.html"><button>Login do professor</button></a>

      <div class="dropdown">
        <button class="dropbtn">Olá, Aluno! </button>
        <div class="dropdown-content">
          <a href="#" ><img src="../imagem/IconPersona.png" alt="png " style="margin-right: 10px;">Perfil</a>
          <a href="#"><img src="../imagem/Config.png" alt="png " style="margin-right: 10px;">Configuração</a>
          <a href="#"><img src="../imagem/Notificacao.png" alt="png " style="margin-right: 10px;">Notificações</a>
          <a href="../código/Login.html " style="display: flex; align-items: center; justify-content: center; gap: 10px;">
            <b style="text-align: center;">Sair</b>
            <img src="../imagem/Saida.png" alt="Sair" style="width: 20px; height: 20px;">
          </a>       
         </div>
      </div>
    </nav>
  </header>

  <main>
    <div class="container">
      <!-- Calendário -->
      <div class="calendario-box">
        <h2>Disponibilidade deste mês</h2>
        <table class="calendario">
          <thead>
            <tr>
              <th>Dom</th><th>Seg</th><th>Ter</th><th>Qua</th><th>Qui</th><th>Sex</th><th>Sáb</th>
            </tr>
          </thead>
          <tbody id="diasDoMes"></tbody>
        </table>
      </div>

      <!-- Disponibilidade e formulário -->
      <div class="reserva-box">
        <h2>Horários disponíveis</h2>

        <div class="horario-grupo">
          <h3>Quadra</h3>
          <ul id="quadraHorarios" class="horarios-lista"></ul>
        </div>
        <div class="horario-grupo">
          <h3>Biblioteca</h3>
          <ul id="bibliotecaHorarios" class="horarios-lista"></ul>
        </div>
        <div class="horario-grupo">
          <h3>Laboratório</h3>
          <ul id="laboratorioHorarios" class="horarios-lista"></ul>
        </div>

        <form id="formReserva">
          <input type="hidden" id="dataSelecionada" name="data" />

          <label for="local">Local:</label>
          <select id="local" required>
            <option value="">Selecione</option>
            <option value="quadra">Quadra</option>
            <option value="biblioteca">Biblioteca</option>
            <option value="laboratorio">Laboratório</option>
          </select>

          <label for="horario">Horário:</label>
          <select id="horario" required>
            <option value="">Selecione horário</option>
          </select>

          <label for="uso">Finalidade:</label>
          <select id="uso" required>
            <option value="">Selecione</option>
            <option value="jogar">Jogar esporte</option>
            <option value="estudar">Estudar</option>
            <option value="gravar">Gravar</option>
            <option value="experimento">Experimento</option>
          </select>

          <button type="submit">Reservar</button>
        </form>
      </div>
    </div>
  </main>

  <!-- Rodapé -->
  <footer>
  <div class="footer-container">

    <!-- Coluna 1 -->
    <div class="footer-col">
      <h3>Quer saber mais sobre a Escola?</h3>
      <p><a href="#">Clique aqui </a></p>
    </div>

    <!-- Coluna 2 -->
    <div class="footer-col">
      <h3>suporte</h3>
      <p>9999-9999</p>
      <p>9999-9999</p>
      <p>chat</p>
    </div>

    <!-- Coluna 3 -->
    <div class="footer-col">
      <h3>contato</h3>
      <div class="social-icons">
        <a href="#"><img src="../imagem/IconFecebook.png" alt="Facebook"></a>
        <a href="#"><img src="../imagem/IconInstagram.png" alt="Instagram"></a>
        <a href="#"><img src="../imagem/IconWhats.png" alt="WhatsApp"></a>
        <a href="#"><img src="../imagem/IconTiktok.png" alt="TikTok"></a>
      </div>
    </div>

   
  </div>
</footer>

  <script>
    // Simulação de horários ocupados
    const horariosSimulados = {
      "2025-10-20": {
        quadra: ["13:00 - 15:00", "15:00 - 17:00"],
        biblioteca: ["08:00 - 10:00"],
        laboratorio: ["10:00 - 12:00"]
      },
      "2025-10-21": {
        quadra: ["15:00 - 17:00"]
      }
    };

    const todosHorarios = [
      "08:00 - 10:00",
      "10:00 - 12:00",
      "13:00 - 15:00",
      "15:00 - 17:00"
    ];

    const diasContainer = document.getElementById("diasDoMes");

    function gerarCalendario() {
      const hoje = new Date();
      const ano = hoje.getFullYear();
      const mes = hoje.getMonth();
      const primeiroDia = new Date(ano, mes, 1);
      const ultimoDia = new Date(ano, mes + 1, 0);

      const totalDias = ultimoDia.getDate();
      const comecaNo = primeiroDia.getDay();

      diasContainer.innerHTML = "";
      let dia = 1;

      for (let i = 0; i < 6; i++) {
        const linha = document.createElement("tr");

        for (let j = 0; j < 7; j++) {
          const celula = document.createElement("td");

          if (i === 0 && j < comecaNo) {
            celula.innerHTML = "";
          } else if (dia > totalDias) {
            break;
          } else {
            celula.innerHTML = dia;
            const data = `${ano}-${String(mes + 1).padStart(2, "0")}-${String(dia).padStart(2, "0")}`;
            celula.dataset.data = data;
            celula.classList.add("dia");
            celula.addEventListener("click", () => selecionarDia(data));
            dia++;
          }

          linha.appendChild(celula);
        }
        diasContainer.appendChild(linha);
      }
    }

    function selecionarDia(data) {
      document.getElementById("dataSelecionada").value = data;

      preencherHorarios("quadra", data, "quadraHorarios");
      preencherHorarios("biblioteca", data, "bibliotecaHorarios");
      preencherHorarios("laboratorio", data, "laboratorioHorarios");
    }

    function preencherHorarios(local, data, elementoId) {
      const container = document.getElementById(elementoId);
      container.innerHTML = "";

      const ocupados = (horariosSimulados[data] && horariosSimulados[data][local]) || [];

      todosHorarios.forEach(horario => {
        const li = document.createElement("li");
        li.textContent = horario;
        if (ocupados.includes(horario)) {
          li.classList.add("ocupado");
        } else {
          li.addEventListener("click", () => {
            document.getElementById("local").value = local;
            atualizarSelectHorarios(local, data);
            document.getElementById("horario").value = horario;
          });
        }
        container.appendChild(li);
      });
    }

    function atualizarSelectHorarios(local, data) {
      const select = document.getElementById("horario");
      select.innerHTML = '<option value="">Selecione horário</option>';

      const ocupados = (horariosSimulados[data] && horariosSimulados[data][local]) || [];

      todosHorarios.forEach(horario => {
        if (!ocupados.includes(horario)) {
          const opt = document.createElement("option");
          opt.value = horario;
          opt.textContent = horario;
          select.appendChild(opt);
        }
      });
    }

    document.getElementById("formReserva").addEventListener("submit", function(e) {
      e.preventDefault();
      alert("Reserva enviada com sucesso!");
    });

    gerarCalendario();
  </script>
</body>
</html>
